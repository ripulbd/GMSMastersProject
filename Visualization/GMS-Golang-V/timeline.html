<!DOCTYPE html>

<html>

<head>
    
<title>Glasgow Memory Server (GMS)</title>
    
<!--meta(name='description', content='website description')-->
    
<!--meta(name='keywords', content='website keywords, website keywords')-->
    
<meta content="text/html; charset=utf-8" http-equiv="content-type">
    
<link href="/resources/stylesheets/timeline.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="/resources/javascripts/jquery.js" ></script>
    
<script src="resources/javascripts/modernizr-1.5.min.js" type="text/javascript"></script>

<script type="text/javascript" src="/resources/javascripts/jquery.tx3-tag-cloud.js" ></script>

<script>
function getSubTopic(name) {
	$.get("/subtags?tagname="+name, "", function(data, status) {
	//var ul=document.createElement('ul');
	var element = document.getElementById("submenu");
	//check high level
	var highlevel = document.getElementById(data.Name+"HighLevel");	
		while (element.firstChild) {
			element.removeChild(element.firstChild);
		}

		//add previous
		if(highlevel ==null){
			var li=document.createElement("li");
			var a = document.createElement("a");
			a.setAttribute("href","#");
			a.onclick= (function(name){ 
				return  function(){
					getSubTopic(name);
				};
			})(data.ParentName);		
			li.appendChild(a);
			var linkText = document.createTextNode("\u23CE");
			a.appendChild(linkText);
			element.appendChild(li);
		}
		
		var i;
		for ( i in data.SubTopics) {
			var li=document.createElement("li");
			var a = document.createElement("a");
			a.setAttribute("id",data.SubTopics[i].Name);
			a.setAttribute("href","#");
			a.onclick= (function(name){ 
				return  function(){
					getSubTopic(name);
				};
			})(data.SubTopics[i].Name);
			li.appendChild(a);
			var linkText = document.createTextNode(data.SubTopics[i].Name);
			a.appendChild(linkText);
			element.appendChild(li);
		}
		showKeywords(data);
	})
}
function showKeywords(topic){
	var element = document.getElementById("tagcloud");
	while (element.firstChild) {
		element.removeChild(element.firstChild);
	}
	document.getElementById("keywordname").innerHTML = topic.Name;
	var i;
	for ( i in topic.Keywords) {
		var li=document.createElement("li");
		li.setAttribute("data-weight",topic.Keywords[i].Weight);
		var a = document.createElement("a");
		a.setAttribute("id",topic.Keywords[i].Name);
		a.setAttribute("href","#");
		li.appendChild(a);
		var linkText = document.createTextNode(topic.Keywords[i].Name);
		a.appendChild(linkText);
		element.appendChild(li);
	}
	$("#tagcloud").tx3TagCloud({
		multiplier: 2
	});
}


</script>

</head>


<body>   
<div id="main">
        
<header>
            
<div id="logo">
                
<div id="logo_text">
                    
<!--class="logo_colour", allows you to change the colour of the text -->

                    
<h1><a href="index.html">Glasgow Memory Server(GMS)</a></h1>
                
</div>
            
</div>           
            
                
<div id="menu_container" style="height: 63px">
                    
<ul id="menu-bar" style="left: 0px; top: 18px">
 
{{range $index, $element := .SubTopics}}  
<li id={{$element.Name}}HighLevel>                       
   <a id={{$element.Name}} onclick="getSubTopic({{$element.Name}})" href="#" >{{printf "%s" $element.Name}}</a>
</li>
{{end}}
                                            
</ul>

<div id="menu-bar" style="left: 0px; top: 5px">
 
	<div id="submenu">
	</div>
                                            
</div>    
                
</div>

</header>

</div>

<div id ="tagC">
  <h2 id="keywordname"></h2>
	<ul id="tagcloud" style="width:50%;">
	</ul>
</div>

<div class = "lowlevellist">
   <h2 id="keyword">Sports</h2>
     <li id = "lowleveltopics">
	 </li>
</div>
       	
</body>
</html>

